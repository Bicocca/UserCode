process ExampleAnalysis = {



# ---- for iguana ---------------------------------------


include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"	
# calorimetry
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
# tracker
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
# muons
include "Geometry/DTGeometry/data/dtGeometry.cfi"
include "Geometry/CSCGeometry/data/cscGeometry.cfi"
include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"
include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"
# magnetic field
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

//    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
//    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"


# ---- input files ---------------------------------------


#include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/datasets/CASTOR_noskim_H130.cfi"
#include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/datasets/MIB_skimAtLeast2Lep_H160.cfi"
#include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/datasets/MIB_skimAtLeast2Lep_tt4j_alpgen_152.cfi"

source = PoolSource
{
  untracked vstring fileNames = {"file:/gwtera2/users/govoni/VBF/personalSkims/PGEEVBFskim_H160.root"} 
#  untracked vstring fileNames = {"file:/gwtera2/users/govoni/VBF/personalSkims/PGZuppetta_tt012.root"} 
}


untracked PSet maxEvents = {untracked int32 input = 1000}
untracked PSet options = { untracked bool wantSummary = true }


# ---- VBF HWW->2l2n analysis includes --------------------------------------


include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/messagesForSkimming.cfi"

//include "HiggsAnalysis/HiggsToWW2Leptons/data/HWWMetCorrector.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMetCorrector.cfi"

include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetCleaner.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetEtaPtMinSelector.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetTagger.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFDisplay.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFProcessFilter.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMCProcessFilter.cfi"
//include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMCChannelFilter.cfi"
module MCeeChannel = channelSelector from "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMCChannelFilter.cfi"
replace MCeeChannel.channel = 2

include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetVetoFilter.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFCentralJetVetoFilter.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFTrackCountVetoFilter.cfi"

include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFElePtAsymmFilter.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFEleIsolation.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFEleNumFilter.cfi"
replace eleNumFiltering.GSFInputTag = refEleIsolation


# ---- electrons ambiguity resolution from FakeRate --------------------


  module refResolver = AmbResolverRef {
    InputTag src = pixelMatchGsfElectrons
    bool filter = false
 }


# ---- minimum MET --------------------------------------


module METminSelector = EtMinMETSelector
{
  InputTag src = muonCorrectedMETVBF
  double etMin = 20 #GeV
}


# ---- the trivial reader --------------------------------------


module trivialReader = VBFTrivialAnalysis
{
  InputTag jetTagsInputTag = tagJets:tagJets
  InputTag GSFInputTag  = refResolver
  InputTag eleIDInputTag  = electronId
  InputTag muInputTag = muons
  InputTag metInputTag = met
}


# ---- analysis paths --------------------------------------


path analysis = {
//                  my_VBFMCProcessFilter & MCeeChannel &
//                  refResolver & 
#                  muonCorrectedMETVBF & METminSelector &
#                  refEleIsolation & eleNumFiltering & 
//                  elePtAsymmFiltering &
#                  jetCleaner & jetUEPU & tagJets & tagFilter &
//                  vbfJetVetoFiltering 
                  vbfCentralJetVetoFiltering &
                  display
//                  vbfTrackCountVetoFiltering 
//                  trivialReader
                }

} # process ExampleAnalysis
