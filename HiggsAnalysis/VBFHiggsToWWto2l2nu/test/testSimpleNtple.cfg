process testTagJets = {


#  include "FWCore/MessageLogger/data/MessageLogger.cfi"
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
include "PhysicsTools/HepMCCandAlgos/data/genCandidates.cfi"
include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidatesFast.cfi"
include "PhysicsTools/RecoCandAlgos/data/allTracks.cfi"
include "Configuration/EventContent/data/EventContent.cff"
//include "EgammaAnalysis/ElectronIDProducers/data/electronId.cfi"
//include "HiggsAnalysis/VBFHiggsToWW2e/data/allEleIds.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/allEleIds.cfi"


# ---- input files ---------------------------------------


source = PoolSource 
{ 
  untracked vstring fileNames = 
    {
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_1.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_2.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_3.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_4.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_5.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_6.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_7.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_8.root",
"file:/gwtera2/users/tancini/VBF/leptSkim/tancini/outSkim_HWW_160/VBFskim_9.root"
    } 
}

untracked PSet maxEvents = {untracked int32 input = -1}
untracked PSet options = { untracked bool wantSummary = true }


# --- the output histos service -----------------------------------


  service = TFileService 
    { 
       string fileName = "TestSimpNtpla.root"
    }
 

# -----------------------------------------------------------------


include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/messagesForSkimming.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMetCorrector.cfi"

include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetCleaner.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetEtaPtMinSelector.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFJetTagger.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFProcessFilter.cfi"

include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFEleIsolation.cfi"
include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFEleNumFilter.cfi"
replace eleNumFiltering.GSFInputTag = refEleIsolation

include "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMCProcessFilter.cfi"
module MCeeChannel = channelSelector from "HiggsAnalysis/VBFHiggsToWWto2l2nu/data/VBFMCChannelFilter.cfi"
replace MCeeChannel.channel = 2


# ---- analysis paths --------------------------------------


  module ntpla = SimpleNtple {  
  InputTag EleTag = refResolver
  InputTag IsolEleTag = dummy
  InputTag MuTag = muons
  InputTag IsolMuTag = dummy
  InputTag MetTag = met
  InputTag TagJetTag = tagJets:tagJets
  InputTag JetTag = tagJets:otherJets
  InputTag TracksTag = ctfWithMaterialTracks

  InputTag eleIDPTDRLooseInputTag   = electronId
  InputTag eleIDPTDRMediumInputTag  = electronIdMedium
  InputTag eleIDPTDRTightInputTag   = electronIdTight

  ## Electron Isolation
  double coneRadius = 0.3
  double vetoRadius = 0.02
  double otherVetoRadius = 0.015
  double ptMin = 1.5
  double lipMax = 100.
  ## double tkIsoCut = 0.2 # -> not used ?
  untracked bool useTkQuality = true

  }

  path filtering = 
    {
      my_VBFMCProcessFilter ,
      muonCorrectedMETVBF &
      refEleIsolation & eleNumFiltering & 
      jetCleaner & jetUEPU & tagJets , ntpla
    }

} # process analysisVBF
