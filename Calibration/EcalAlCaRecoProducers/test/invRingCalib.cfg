process AlCaElectronsProductionTesting =
{
    untracked PSet maxEvents = {untracked int32 input = 2000}
    untracked PSet options = {
    	untracked bool wantSummary = false
      }
    service = MessageLogger{
    	untracked vstring destinations = {"cout"}
	untracked vstring categories = {"IML"}

     untracked PSet cout = {
	untracked string treshold = "INFO"
	untracked PSet default		= {untracked int32 limit = 0}
	untracked PSet IML		= {untracked int32 limit = 100}
       }
       
    }

    source = PoolSource {
	untracked vstring fileNames = 
	{
#'/store/RelVal/2007/8/7/RelVal-Wenu_Calibration-1186512177/0003/0A084F28-8545-DC11-8069-0030485629DE.root',
'/store/RelVal/2007/8/7/RelVal-Wenu_Calibration-1186512177/0003/0C33A721-8445-DC11-8B36-00304885AC7C.root',
'/store/RelVal/2007/8/7/RelVal-Wenu_Calibration-1186512177/0003/18C1B824-8545-DC11-AC1E-003048562A14.root'
#'/store/RelVal/2007/8/7/RelVal-Wenu_Calibration-1186512177/0003/22DACAE6-8345-DC11-8504-0030485611F6.root'

	}
     untracked uint32 debugVerbosity = 1
     untracked bool debugFlag = false
     }

#-----Electron Filter---------------------------
    module electronFilter = EtaPtMinPixelMatchGsfElectronSelector
      {
        InputTag src = pixelMatchGsfElectrons
        bool filter = true
        double ptMin = 5.0
        double etaMin = -2.7
        double etaMax = 2.7
      }
#------AlCaReco producer-----------------------------
     module alCaIsolatedElectrons = AlCaElectronsProducer
      {
        InputTag ebRecHitsLabel = ecalRecHit:EcalRecHitsEB
        InputTag eeRecHitsLabel = ecalRecHit:EcalRecHitsEE
        InputTag electronLabel = electronFilter
        
        string alcaBarrelHitCollection = "alcaBarrelHits"
        string alcaEndcapHitCollection = "alcaEndcapHits"
        
        int32 etaSize = 5
        int32 phiSize = 11
      }
#----------Event Setup
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
  es_source = CaloMiscalibTools{
               untracked string fileNameBarrel = "miscalib_barrel_0.05.xml"
	       untracked string fileNameEndcap = "miscalib_endcap_0.05.xml"
  }
  es_prefer = CaloMiscalibTools{}


  
#----------Calibration of the rings with the inverse Matrix-----
     looper = InvRingCalib
     {
	InputTag barrelAlca = alCaIsolatedElectrons:alcaBarrelHits
	InputTag endcapAlca = alCaIsolatedElectrons:alcaEndcapHits
	InputTag ElectronLabel = electronFilter
	int32 recoWindowSide = 5
	double minEnergyPerCrystal = 0
	double maxEnergyPerCrystal = 150
        int32 etaStart =6  #between -85 and 85	
	int32 etaEnd = 85 #between -85 and 85, > etaStart
	int32 etaWidth =10 
	double minCoeff = 0.7
	double maxCoeff = 1.5
	int32 loops = 4
	int32 startRing = 0 #between 0 and 39
	int32 endRing = 19 #between 0 and 39, > startRing!
	int32 usingBlockSolver = 0
     }
#--------------Analisys path---------

path p = {electronFilter, alCaIsolatedElectrons}
#----------------output Module -------

    module outAlcaReco = PoolOutputModule
    {
      untracked string fileName = "alCaElectrons.root"
      untracked vstring outputCommands = 
       {
          "drop  *",
	  "keep TrackCandidates_pixelMatchElectrons_*_*",
	  "keep *_electronFilter_*_*",
	  "keep *_alCaIsolatedElectrons_*_*"
	}
	untracked PSet SelectEvents =
	 {
		vstring SelectEvents = {"p"}
	 }
      }

    endpath outpathAlca = {outAlcaReco}


}
